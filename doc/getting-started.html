<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Vagish Hemmige" />

<meta name="date" content="2025-07-12" />

<title>Getting Started with sRtr</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Getting Started with sRtr</h1>
<h4 class="author">Vagish Hemmige</h4>
<h4 class="date">2025-07-12</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The <code>sRtr</code> package provides comprehensive tools for
working with Scientific Registry of Transplant Recipients (SRTR)
Standard Analysis Files (SAFs) in R. This vignette will guide you
through the essential steps of setting up your environment and loading
SRTR data files with proper labeling.</p>
<div id="what-is-srtr" class="section level2">
<h2>What is SRTR?</h2>
<p>The Scientific Registry of Transplant Recipients (SRTR) is a
comprehensive database that tracks transplant data in the United States.
The SRTR Standard Analysis Files (SAFs) contain de-identified
patient-level data that researchers can use to study transplant
outcomes, waiting list dynamics, and donor characteristics.</p>
</div>
<div id="package-overview" class="section level2">
<h2>Package Overview</h2>
<p>The <code>sRtr</code> package streamlines the process of:</p>
<ul>
<li>Setting up your SRTR data directory</li>
<li>Loading SRTR files with automatic format detection</li>
<li>Applying official SRTR variable labels and factor conversions</li>
<li>Preparing data for analysis with proper documentation</li>
</ul>
</div>
</div>
<div id="installation" class="section level1">
<h1>Installation</h1>
<p>You can install the development version of <code>sRtr</code> from
GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;VagishHemmige/sRtr&quot;</span>)</span></code></pre></div>
<p>Load the package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(sRtr)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">library</span>(labelled)</span></code></pre></div>
</div>
<div id="setting-up-your-srtr-data-directory" class="section level1">
<h1>Setting Up Your SRTR Data Directory</h1>
<p>Before you can load SRTR files, you need to tell the package where
your SRTR data files are located. The <code>set_SRTR_wd()</code>
function allows you to specify the directory containing your SRTR
files.</p>
<div id="temporary-setup-session-only" class="section level2">
<h2>Temporary Setup (Session Only)</h2>
<p>For a single R session, you can set the working directory
temporarily:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Point to your SRTR data directory for this session only</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">set_SRTR_wd</span>(<span class="st">&quot;path/to/your/srtr/files&quot;</span>)</span></code></pre></div>
</div>
<div id="permanent-setup" class="section level2">
<h2>Permanent Setup</h2>
<p>If you frequently work with SRTR data, you can set the directory
permanently by adding the <code>permanent = TRUE</code> argument:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Set the directory permanently across R sessions</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">set_SRTR_wd</span>(<span class="st">&quot;path/to/your/srtr/files&quot;</span>, <span class="at">permanent =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>This will save your preference and automatically load it in future R
sessions.</p>
</div>
<div id="verifying-your-setup" class="section level2">
<h2>Verifying Your Setup</h2>
<p>After setting your working directory, the package will automatically
detect the available SRTR files in your directory. You can verify that
your setup is working correctly by checking if your files are
recognized.</p>
</div>
</div>
<div id="loading-srtr-files" class="section level1">
<h1>Loading SRTR Files</h1>
<p>The primary function for loading SRTR data is
<code>load_srtr_file()</code>. This function can load both SAS
(.sas7bdat) and Parquet (.parquet) files and automatically applies the
appropriate SRTR data dictionary.</p>
<div id="basic-file-loading" class="section level2">
<h2>Basic File Loading</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Load a transplant file (liver transplants)</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>tx_li <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;TX_LI&quot;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co"># Load a waiting list file (kidney candidates)</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>cand_kida <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;CAND_KIDA&quot;</span>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co"># Load a donor file</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>donor <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;DONOR&quot;</span>)</span></code></pre></div>
</div>
<div id="loading-with-labels" class="section level2">
<h2>Loading with Labels</h2>
<p>One of the key features of <code>sRtr</code> is its ability to
automatically apply variable labels and factor conversions using the
official SRTR data dictionary.</p>
<div id="variable-labels" class="section level3">
<h3>Variable Labels</h3>
<p>Variable labels provide descriptive names for each column:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Load with variable labels</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>tx_li <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;TX_LI&quot;</span>, <span class="at">var_labels =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co"># View variable labels</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">var_label</span>(tx_li<span class="sc">$</span>DON_RACE)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="fu">var_label</span>(tx_li<span class="sc">$</span>REC_AGE_AT_TX)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">var_label</span>(tx_li<span class="sc">$</span>GRAFT_STAT)</span></code></pre></div>
</div>
<div id="factor-labels" class="section level3">
<h3>Factor Labels</h3>
<p>Factor labels convert coded values to meaningful categories:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Load with factor labels</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>tx_li <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;TX_LI&quot;</span>, <span class="at">factor_labels =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># View factor levels</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">str</span>(tx_li<span class="sc">$</span>DON_RACE)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="fu">levels</span>(tx_li<span class="sc">$</span>DON_RACE)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co"># View factor labels for transplant status</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="fu">str</span>(tx_li<span class="sc">$</span>GRAFT_STAT)</span></code></pre></div>
</div>
<div id="complete-labeling" class="section level3">
<h3>Complete Labeling</h3>
<p>For the most informative data, load with both variable and factor
labels:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Load with both variable and factor labels</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>tx_li <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;TX_LI&quot;</span>, <span class="at">var_labels =</span> <span class="cn">TRUE</span>, <span class="at">factor_labels =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co"># Now you have both descriptive variable names and meaningful factor levels</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">str</span>(tx_li<span class="sc">$</span>DON_RACE)</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="fu">var_label</span>(tx_li<span class="sc">$</span>DON_RACE)</span></code></pre></div>
</div>
</div>
</div>
<div id="working-with-labeled-data" class="section level1">
<h1>Working with Labeled Data</h1>
<p>Once you’ve loaded your SRTR data with labels, you can work with it
like any other R data frame, but with the added benefit of meaningful
variable and factor labels.</p>
<div id="exploring-your-data" class="section level2">
<h2>Exploring Your Data</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Basic data exploration</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">dim</span>(tx_li)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">names</span>(tx_li)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co"># View the first few rows</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="fu">head</span>(tx_li)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co"># Summary statistics with meaningful labels</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="fu">summary</span>(tx_li<span class="sc">$</span>DON_RACE)</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="fu">summary</span>(tx_li<span class="sc">$</span>REC_AGE_AT_TX)</span></code></pre></div>
</div>
<div id="preserving-labels-during-analysis" class="section level2">
<h2>Preserving Labels During Analysis</h2>
<p>The <code>labelled</code> package helps preserve your variable labels
during data manipulation:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Filter data while preserving labels</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>recent_tx <span class="ot">&lt;-</span> tx_li <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">filter</span>(TX_DATE <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-01-01&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="fu">select</span>(TX_DATE, DON_RACE, REC_AGE_AT_TX, GRAFT_STAT)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co"># Labels are preserved</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="fu">var_label</span>(recent_tx<span class="sc">$</span>DON_RACE)</span></code></pre></div>
</div>
</div>
<div id="independent-labeling-functions" class="section level1">
<h1>Independent Labeling Functions</h1>
<p>If you already have loaded SRTR data (e.g., from another source), you
can apply labels independently using the dedicated labeling
functions.</p>
<div id="applying-factor-labels" class="section level2">
<h2>Applying Factor Labels</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Load raw data</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="st">&quot;TX_KI.sas7bdat&quot;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># Apply factor labels</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">apply_srtr_factors</span>(df, <span class="at">filekey =</span> <span class="st">&quot;TX_KI&quot;</span>)</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co"># View the result</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="fu">str</span>(df<span class="sc">$</span>DON_RACE)</span></code></pre></div>
</div>
<div id="applying-variable-labels" class="section level2">
<h2>Applying Variable Labels</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># Apply variable labels</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">apply_srtr_varlabels</span>(df, <span class="at">filekey =</span> <span class="st">&quot;TX_KI&quot;</span>)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co"># View variable labels</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="fu">var_label</span>(df<span class="sc">$</span>DON_RACE)</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="fu">var_label</span>(df<span class="sc">$</span>REC_AGE_AT_TX)</span></code></pre></div>
</div>
<div id="automatic-file-detection" class="section level2">
<h2>Automatic File Detection</h2>
<p>If your data frame name matches the SRTR file name, you can omit the
<code>filekey</code> parameter:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Load data with matching name</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>TX_KI <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="st">&quot;TX_KI.sas7bdat&quot;</span>)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Apply labels without specifying filekey</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>TX_KI <span class="ot">&lt;-</span> TX_KI <span class="sc">%&gt;%</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  <span class="fu">apply_srtr_factors</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>  <span class="fu">apply_srtr_varlabels</span>()</span></code></pre></div>
</div>
</div>
<div id="common-srtr-file-types" class="section level1">
<h1>Common SRTR File Types</h1>
<p>The <code>sRtr</code> package supports all standard SRTR file types.
Here are some commonly used files:</p>
<div id="transplant-files" class="section level2">
<h2>Transplant Files</h2>
<ul>
<li><code>TX_LI</code> - Liver transplants</li>
<li><code>TX_KI</code> - Kidney transplants</li>
<li><code>TX_HR</code> - Heart transplants</li>
<li><code>TX_LU</code> - Lung transplants</li>
<li><code>TX_IN</code> - Intestine transplants</li>
<li><code>TX_PA</code> - Pancreas transplants</li>
</ul>
</div>
<div id="candidate-files" class="section level2">
<h2>Candidate Files</h2>
<ul>
<li><code>CAND_LIVA</code> - Liver candidates</li>
<li><code>CAND_KIDA</code> - Kidney candidates</li>
<li><code>CAND_THORA</code> - Heart candidates</li>
<li><code>CAND_LUNGA</code> - Lung candidates</li>
</ul>
</div>
<div id="other-files" class="section level2">
<h2>Other Files</h2>
<ul>
<li><code>DONOR</code> - Donor information</li>
<li><code>DONOR_DECEASED</code> - Deceased donor information</li>
<li><code>DONOR_LIVING</code> - Living donor information</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Examples of loading different file types</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>liver_tx <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;TX_LI&quot;</span>, <span class="at">var_labels =</span> <span class="cn">TRUE</span>, <span class="at">factor_labels =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>kidney_cand <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;CAND_KIDA&quot;</span>, <span class="at">var_labels =</span> <span class="cn">TRUE</span>, <span class="at">factor_labels =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>donors <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;DONOR&quot;</span>, <span class="at">var_labels =</span> <span class="cn">TRUE</span>, <span class="at">factor_labels =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="best-practices" class="section level1">
<h1>Best Practices</h1>
<div id="always-use-labels" class="section level2">
<h2>1. Always Use Labels</h2>
<p>Always load your data with both variable and factor labels for the
most informative analysis:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Recommended approach</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;TX_LI&quot;</span>, <span class="at">var_labels =</span> <span class="cn">TRUE</span>, <span class="at">factor_labels =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="check-your-data" class="section level2">
<h2>2. Check Your Data</h2>
<p>Always examine your data after loading to ensure it loaded
correctly:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Check dimensions</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">dim</span>(data)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co"># Check variable labels</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="fu">var_label</span>(data[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="co"># Check factor levels for key variables</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="fu">str</span>(data<span class="sc">$</span>DON_RACE)</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="fu">str</span>(data<span class="sc">$</span>GRAFT_STAT)</span></code></pre></div>
</div>
<div id="document-your-file-sources" class="section level2">
<h2>3. Document Your File Sources</h2>
<p>Keep track of which SRTR files you’re using and their versions:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Good practice: document your data sources</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co"># TX_LI file loaded from SRTR SAF 2024Q1</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co"># Contains liver transplant data from 1987-2023</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>tx_li <span class="ot">&lt;-</span> <span class="fu">load_srtr_file</span>(<span class="st">&quot;TX_LI&quot;</span>, <span class="at">var_labels =</span> <span class="cn">TRUE</span>, <span class="at">factor_labels =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="troubleshooting" class="section level1">
<h1>Troubleshooting</h1>
<div id="common-issues" class="section level2">
<h2>Common Issues</h2>
<div id="file-not-found" class="section level3">
<h3>File Not Found</h3>
<p>If you get a “file not found” error, check: - Is your working
directory set correctly with <code>set_SRTR_wd()</code>? - Are your
files in the specified directory? - Are you using the correct file name
(without extension)?</p>
</div>
<div id="labels-not-applied" class="section level3">
<h3>Labels Not Applied</h3>
<p>If labels aren’t being applied: - Ensure you’re using the correct
file key - Check that your file name matches the expected SRTR
convention - Verify you’re using <code>var_labels = TRUE</code> and/or
<code>factor_labels = TRUE</code></p>
</div>
<div id="memory-issues" class="section level3">
<h3>Memory Issues</h3>
<p>For large files: - Consider loading only the variables you need -
Work with data in chunks if necessary - Ensure you have sufficient RAM
for your dataset</p>
</div>
</div>
</div>
<div id="next-steps" class="section level1">
<h1>Next Steps</h1>
<p>Now that you’ve learned the basics of loading and labeling SRTR data,
you might want to explore:</p>
<ul>
<li><strong>STROBE Analysis Workflows</strong>: Learn how to create
CONSORT/STROBE diagrams for your research</li>
</ul>
<p>For more advanced functionality, including STROBE diagram generation,
see the additional vignettes in this package.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
